!function(e,t,n){"use strict";function o(e){var t=/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;return t.test(e)?n("#newsletter-email-error").hide():n("#newsletter-email-error").show(),t.test(e)}var s={},r=function(){n("#newsletter-popup-privacy").addClass("open"),n("#privacy-consent").prop("checked",!1),n("#newsletter-consent").prop("checked",!0),n("#marketing-consent").prop("checked",!1),n("#tracking-consent").prop("checked",!1),n("#newsletter-error").hide(),n("#privacy-consent-error").hide()};n("#newsletter-privacy-policy-ok-button").on("click",function(){s={};var e=n("#privacy-consent").prop("checked"),t=n("#newsletter-consent").prop("checked");if(!e||!t)return e?n("#privacy-consent-error").hide():n("#privacy-consent-error").show(),void(t?n("#newsletter-error").hide():n("#newsletter-error").show());n.each(n('.privacy-settings input[type="checkbox"]'),function(e,t){s[n(t).attr("value")]=n(t).prop("checked")});var r=n("#newsletter-email").val();if(!0===o(r))return n("#newsletter-privacy-policy-ok-button").addClass("busy"),void function(e){var t={email:e};for(var r in s)s.hasOwnProperty(r)&&(t[r]=s[r]);n.ajax({url:n("#newsletter-popup-privacy").attr("action"),data:JSON.stringify(t),method:"POST",contentType:"application/json"}).then(function(e,t,r){switch(n("#newsletter-privacy-policy-ok-button").removeClass("busy"),r.status){case 202:n("#newsletter-popup-privacy").removeClass("open"),setTimeout(function(){n("#newsletter-popup-confirm").addClass("open")},600);break;case 400:n("#newsletterSubscribeStatus").text("Your email address is invalid."),n("#newsletterSubscribeStatus").show();break;case 500:n("#newsletterSubscribeStatus").text("Sorry, unable to subscribe. Please try again later!"),n("#newsletterSubscribeStatus").show();break;default:return void n("#newsletter-privacy-policy-ok-button").removeClass("busy")}})}(r);setTimeout(function(){openPopup(s)},400)}),n("#newsletter-privacy-policy-cancel-button").on("click",function(){n("#newsletter-popup-privacy").removeClass("open")}),n("#confirm-email-ok-button").on("click",function(){n("#newsletter-popup-confirm").removeClass("open")}),n("#newsletter-popup-confirm .modal-backdrop").on("click",function(){n("#newsletter-popup-confirm").removeClass("open")}),n(document).on("click",function(e){n(e.target).is("#privacy-modal-backdrop")&&n("#newsletter-popup-privacy").removeClass("open"),n(e.target).is("#confirm-newsletter-modal-backdrop")&&n("#newsletter-popup-confirm").removeClass("open")}),n("#newsletter-email").on("keypress",function(e){13===e.keyCode&&(!0===o(n("#newsletter-email").val())&&r())}),n("#newsletter-email").on("click",function(){n("#newsletter-popup-privacy").removeAttr("style"),n("#newsletter-popup-confirm").removeAttr("style")}),n("#subscribe-btn").on("click",function(){!0===o(n("#newsletter-email").val())&&r()})}(window,document,window.jQuery);